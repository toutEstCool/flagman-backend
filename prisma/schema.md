# üìò Prisma Schema Documentation

_Generated on 2025-03-30_

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É Prisma-—Å—Ö–µ–º—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, –≤–∫–ª—é—á–∞—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–±—ä—è–≤–ª–µ–Ω–∏—è, —á–∞—Ç—ã, —Å–æ–æ–±—â–µ–Ω–∏—è, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –∂–∞–ª–æ–±—ã –∏ –¥—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏.

---

## üì¶ Models

- [`User`](#user)
- [`Listing`](#listing)
- [`Favorite`](#favorite)
- [`Subscription`](#subscription)
- [`Chat`](#chat)
- [`Message`](#message)
- [`City`](#city)
- [`ActivityLog`](#activitylog)
- [`Complaint`](#complaint)

---

## üë§ User

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

| –ü–æ–ª–µ         | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|------------|----------|
| id           | Int        | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| email        | String?    | Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) |
| phone        | String?    | –¢–µ–ª–µ—Ñ–æ–Ω (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) |
| name         | String?    | –ò–º—è |
| avatarUrl    | String?    | –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä |
| city         | String?    | –ì–æ—Ä–æ–¥ |
| isVerified   | Boolean    | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| role         | UserRole   | –†–æ–ª—å (user, admin, –∏ —Ç.–¥.) |
| status       | UserStatus | –°—Ç–∞—Ç—É—Å (active, banned –∏ —Ç.–¥.) |
| authType     | AuthType   | –¢–∏–ø –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| lastLogin    | DateTime?  | –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ |
| meta         | Json?      | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ |
| createdAt    | DateTime   | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updatedAt    | DateTime   | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

–°–≤—è–∑–∏:

- `listings`: –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `favorites`: –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `chats`: —á–∞—Ç—ã
- `messages`: —Å–æ–æ–±—â–µ–Ω–∏—è
- `subscriptions`, `activityLogs`, `complaintsSent`, `complaintsToMe`

---

## üè† Listing

–û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏.

| –ü–æ–ª–µ         | –¢–∏–ø          | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|--------------|----------|
| id           | Int          | ID |
| title        | String       | –ó–∞–≥–æ–ª–æ–≤–æ–∫ |
| description  | String       | –û–ø–∏—Å–∞–Ω–∏–µ |
| price        | Int          | –¶–µ–Ω–∞ |
| type         | ListingType  | –¢–∏–ø (sale/rent) |
| propertyType | PropertyType | –¢–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ |
| address      | String       | –ê–¥—Ä–µ—Å |
| cityId       | Int?         | ID –≥–æ—Ä–æ–¥–∞ |
| latitude     | Float        | –®–∏—Ä–æ—Ç–∞ |
| longitude    | Float        | –î–æ–ª–≥–æ—Ç–∞ |
| area         | Float        | –ü–ª–æ—â–∞–¥—å –≤ –º¬≤ |
| rooms        | Int?         | –ö–æ–ª-–≤–æ –∫–æ–º–Ω–∞—Ç |
| floor        | Int?         | –≠—Ç–∞–∂ |
| totalFloors  | Int?         | –í—Å–µ–≥–æ —ç—Ç–∞–∂–µ–π |
| status       | ListingStatus| –°—Ç–∞—Ç—É—Å |
| isPremium    | Boolean      | –ü—Ä–æ–¥–≤–∏–≥–∞–µ–º–æ–µ? |
| images       | String[]     | –ú–∞—Å—Å–∏–≤ —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ñ–æ—Ç–æ |
| slug         | String?      | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π slug |
| viewCount    | Int          | –ü—Ä–æ—Å–º–æ—Ç—Ä—ã |
| contactCount | Int          | –ö–æ–ª-–≤–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ |
| createdAt    | DateTime     | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–æ |
| updatedAt    | DateTime     | –ö–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ |
| deletedAt    | DateTime?    | –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ |

–°–≤—è–∑–∏:
`author`, `favorites`, `subscriptions`, `chats`, `Complaint`

---

## ‚≠ê Favorite

–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

| –ü–æ–ª–µ        | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|----------|
| id          | Int      | ID |
| userId      | Int      | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| listingId   | Int      | ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| createdAt   | DateTime | –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ |

–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –æ–¥–Ω–∞ –∏–∑–±—Ä–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ.

---

## üì© Subscription

–ü–æ–¥–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ñ–∏–ª—å—Ç—Ä—ã.

| –ü–æ–ª–µ        | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|----------|
| id          | Int      | ID |
| userId      | Int      | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| listingId   | Int?     | –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å) |
| filter      | Json     | –£—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ |
| createdAt   | DateTime | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–∞ |

---

## üí¨ Chat

–î–∏–∞–ª–æ–≥ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –∞–≤—Ç–æ—Ä–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

| –ü–æ–ª–µ        | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|----------|
| id          | Int      | ID —á–∞—Ç–∞ |
| userId      | Int      | –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä |
| listingId   | Int      | –û–±—ä—è–≤–ª–µ–Ω–∏–µ |
| unreadCount | Int      | –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| lastMessageAt | DateTime? | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è |

–°–≤—è–∑–∏: `user`, `listing`, `messages`

---

## üì® Message

–°–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ.

| –ü–æ–ª–µ      | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| id        | Int      | ID |
| chatId    | Int      | ID —á–∞—Ç–∞ |
| senderId  | Int      | –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å |
| content   | String   | –¢–µ–∫—Å—Ç |
| createdAt | DateTime | –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ |

---

## üó∫Ô∏è City

–ì–æ—Ä–æ–¥, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö.

| –ü–æ–ª–µ      | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|----------|
| id        | Int     | ID |
| name      | String  | –ù–∞–∑–≤–∞–Ω–∏–µ |
| region    | String? | –†–µ–≥–∏–æ–Ω |
| latitude  | Float   | –®–∏—Ä–æ—Ç–∞ |
| longitude | Float   | –î–æ–ª–≥–æ—Ç–∞ |
| rating    | Int     | –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å |

---

## üìà ActivityLog

–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

| –ü–æ–ª–µ      | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|----------|
| id        | Int     | ID |
| userId    | Int     | –ö—Ç–æ |
| action    | String  | –ß—Ç–æ —Å–¥–µ–ª–∞–ª |
| meta      | Json?   | –î–æ–ø. –¥–∞–Ω–Ω—ã–µ |
| createdAt | DateTime | –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è |

---

## üö® Complaint

–ñ–∞–ª–æ–±–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ.

| –ü–æ–ª–µ        | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|----------|
| id          | Int      | ID |
| senderId    | Int      | –ö—Ç–æ –ø–æ–∂–∞–ª–æ–≤–∞–ª—Å—è |
| receiverId  | Int?     | –ù–∞ –∫–æ–≥–æ |
| listingId   | Int?     | –û–±—ä—è–≤–ª–µ–Ω–∏–µ |
| messageId   | Int?     | –°–æ–æ–±—â–µ–Ω–∏–µ |
| reason      | String   | –ü—Ä–∏—á–∏–Ω–∞ |
| status      | ComplaintStatus | –°—Ç–∞—Ç—É—Å |
| createdAt   | DateTime | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |

–°–≤—è–∑–∏: `sender`, `receiver`, `listing`, `message`

---

## üî† Enums

### `UserRole`
- `user`
- `admin`
- `agent`
- `developer`

### `UserStatus`
- `active`
- `banned`
- `inactive`

### `AuthType`
- `phone`
- `email`
- `social`

### `ListingType`
- `sale`
- `rent`

### `PropertyType`
- `apartment`
- `house`
- `land`
- `commercial`

### `ListingStatus`
- `active`
- `hidden`
- `archived`
- `draft`

### `ComplaintStatus`
- `open`
- `reviewed`
- `rejected`
- `resolved`
